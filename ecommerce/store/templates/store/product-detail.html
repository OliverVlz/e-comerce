{% extends 'store/main.html' %}
{% load static %}
{% block content %}

<div class="container mt-5">
    <div class="row g-4">
        <!-- Imagen del producto -->
        <div class="col-md-6 text-center">
            <div class="product-image-wrapper p-3 shadow-sm rounded bg-white">
                <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/placeholder.png' %}{% endif %}" class="img-fluid rounded" alt="{{ product.name }}">
            </div>
        </div>

        <!-- Detalles del producto -->
        <div class="col-md-6">
            <div class="product-details-wrapper p-4 bg-white shadow-sm rounded">
                <h2 class="mb-1">{{ product.name }}</h2>
                <h4 class="text-success mb-3"><strong>${{ product.price|floatformat:2 }}</strong></h4>
                <p class="text-muted mb-0"><strong>Referencia: </strong> {{ product.sku }}</p>
                <p class="text-muted"><strong>Descripción:</strong> {{ product.description }}</p>
                
                <!-- Especificaciones -->
                <h5 class="mt-4">Especificaciones</h5>
                <ul class="list-group mb-4">
                    {% for attribute in attributes %}
                        <li class="list-group-item">{{ attribute.name }}: {{ attribute.value }}</li>
                    {% empty %}
                        <li class="list-group-item text-muted">No hay especificaciones disponibles.</li>
                    {% endfor %}
                </ul>

                <a href="{% url 'add_to_cart' product.id %}" class="btn btn-success w-100">Añadir al carrito</a>
            </div>
        </div>
    </div>

    <hr class="my-5">

    <!-- Productos Similares -->
    <div class="similar-products mt-5">
        <h4 class="fw-bold mb-4">Productos Similares</h4>
        <div class="row">
            {% for similar_product in similar_products %}
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="card h-100 shadow-sm">
                        <a href="{% url 'product_detail' similar_product.slug %}">
                            <img src="{% if similar_product.image %}{{ similar_product.image.url }}{% else %}{% static 'images/placeholder.png' %}{% endif %}" class="card-img-top img-fluid" alt="{{ similar_product.name }}" style="height: 200px; object-fit: cover;">
                        </a>
                        <div class="card-body text-center">
                            <h6 class="card-title">{{ similar_product.name|truncatechars:30 }}</h6>
                            <p class="text-primary fw-bold">${{ similar_product.price|floatformat:2 }}</p>
                        </div>
                        <div class="card-footer bg-white border-0 d-flex justify-content-between align-items-center">
                            <a href="{% url 'product_detail' similar_product.slug %}" class="btn btn-outline-primary btn-sm flex-grow-1 text-center">Ver detalles</a>
                            <a href="{% url 'add_to_cart' similar_product.id %}" class="btn btn-primary btn-sm d-flex align-items-center justify-content-center" style="width: 40px; height: 30px;">
                                <img src="{% static 'images/carritoB.svg' %}" alt="Carrito de compras" style="width: 18px; height: 18px;">
                            </a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p class="text-center text-muted">No hay productos similares disponibles.</p>
            {% endfor %}
        </div>
    </div>
</div>

<style>
    body {
        background-color: #f6f6f6;
    }
</style>
{% endblock %}
